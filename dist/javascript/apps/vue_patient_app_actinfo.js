Vue.component("app-actinfo",{props:{production:{type:Boolean,default:!0}},data:function(){return{apps:{production:[{name:"actinfo_ein",title:"ActInfo",subtitle:"Information network on addiction care and therapy",identifier:"ch.suedhang.apps.actinfo_ein.production"},{name:"actinfo_aus",title:"ActInfo",subtitle:"Information network on addiction care and therapy",identifier:"ch.suedhang.apps.actinfo_aus.production"}]},pdf_content:[]}},created(){try{!0===this.production&&this.apps.production.forEach(function(app){var params={name:app.name,title:app.title,subtitle:app.subtitle,identifier:app.identifier};this.$store.dispatch("getSurveyResponses",params)}.bind(this))}catch(err){console.error("created - actInfo",err)}},methods:{},computed:{data_ein(){try{if(!0===this.production){var data_ein=null;return this.apps.production.forEach(function(app){"actinfo_ein"===app.name&&(data_ein=this.$store.state.data_apps.data_object[app.identifier],console.log("(✔) actInfo: data_ein",data_ein))}.bind(this)),data_ein}}catch(err){return console.error("(!) actInfo: data_ein",err),null}},data_ein_last(){try{var data_ein_last=this.data_ein.data[this.data_ein.data.length-1];return console.log("(✔) actInfo: data_ein_last",data_ein_last),data_ein_last}catch(err){return console.error("(!) actInfo: data_ein",err),null}},problemsubstanzen(){try{return this.data_ein_last.calculation.actinfo_ein.problemsubstanzen.substanzen.length>1?"Problemsubstanzen":"Problemsubstanz"}catch(err){return"Problemsubstanz"}},hauptproblem_substanz(){try{var h=this.data_ein_last.calculation.actinfo_ein.zusatzangaben.hauptproblem_substanz_text;return null!==h&&""!==h?h:"Häufigkeit"}catch(err){return"Häufigkeit"}},data_aus(){try{if(!0===this.production){var data_aus=null;return this.apps.production.forEach(function(app){"actinfo_aus"===app.name&&(data_aus=this.$store.state.data_apps.data_object[app.identifier],console.log("(✔) actInfo: data_aus",data_aus))}.bind(this)),data_aus}}catch(err){return console.error("(!) actInfo: data_aus",err),null}},data_merged(){try{var return_obj=null;return void 0!==this.data_ein&&void 0!==this.data_aus&&(return_obj=this.merge_data_ein_aus(this.data_ein,this.data_aus),console.log("(✔) actInfo: data_merged",return_obj)),return_obj}catch(err){return console.error("(!) actInfo: data_merged",err),null}},patient_secure(){try{return this.$store.state.patient.data.extras.secure}catch(e){return""}},pdf_ready(){try{if(this.sr_data.length&&this.current_module){var pdf=[];return pdf.push(this.pdf_app_info(this.current_module,!0)),pdf.push(this.actinfo_pdf_content(this.sr)),this.pdf_content=pdf,!0}return!1}catch(e){return!1}}},template:'\n        <div>\n\n            <div v-if="data_merged">\n                <optinomic-content-block v-if="data_merged.actinfo_ein_data" :title="problemsubstanzen" :subtitle="hauptproblem_substanz" id="actinfo_substanz">\n                    <p v-text="data_ein_last.calculation.actinfo_ein.problemsubstanzen.description"></p>\n                    <ol class="ml-4">\n                        <li class="mb-3" v-for="s in data_ein_last.calculation.actinfo_ein.problemsubstanzen.substanzen" :key="s.substanz">\n                            <b v-text="s.substanz + \': \'"></b>\n                            <span v-text="s.label"></span>\n                        </li>\n                    </ol>\n                    <div v-if="data_ein_last.calculation.actinfo_ein.zusatzangaben">\n                        <p class="title font-weight-light mt-8">Zusatzangaben</p>\n                        <optinomic-clipboard-text :text="data_ein_last.calculation.actinfo_ein.zusatzangaben.kunsumalter_text + \' \' + data_ein_last.calculation.actinfo_ein.zusatzangaben.entzuege_text"></optinomic-clipboard-text>\n                    </div>\n                </optinomic-content-block>\n\n                <optinomic-content-block v-if="data_merged.show_audit" title="Alkoholabhängigkeit" subtitle="Alcohol Use Disorders Identification (AUDIT)" id="actinfo_audit">\n                    <optinomic-clipboard-text :text="data_merged.audit_text"></optinomic-clipboard-text>\n                    <optinmic-profile-chart \n                        :options="actinfo_audit_chart.options"\n                        :scales="actinfo_audit_chart.scales" \n                        :ranges="actinfo_audit_chart.ranges"\n                        :scores="data_merged">\n                    </optinmic-profile-chart>\n                </optinomic-content-block>\n\n                <optinomic-content-block v-if="data_merged.show_fagerstoem" title="Nikotinabhängigkeit" subtitle="Fagerström" id="actinfo_fagerstroem">\n                    <optinomic-clipboard-text :text="data_merged.fagerstroem_text"></optinomic-clipboard-text>\n                    <optinmic-profile-chart \n                        :options="actinfo_fagerstroem_chart.options"\n                        :scales="actinfo_fagerstroem_chart.scales" \n                        :ranges="actinfo_fagerstroem_chart.ranges"\n                        :scores="data_merged">\n                    </optinmic-profile-chart>\n                </optinomic-content-block>\n            </div>\n            <div v-else lass="mt-12">\n                <v-sheet class="mt-12 mb-3">\n                    <v-skeleton-loader class="mx-auto" type="article, sentence, article, table-tbody"></v-skeleton-loader>\n                </v-sheet>\n            </div>\n\n            <div v-if="pdf_ready">\n                <optinomic-content-block title="Druckvorlage" subtitle="PDF" id="id_pdf">\n                    <optinomic-pdfmake :header-left="patient_secure" footer-left="act-info"\n                        header-right="Klinik Südhang" document-title="actInfo" :content="pdf_content" hide-logo>\n                    </optinomic-pdfmake>\n                </optinomic-content-block>\n            </div>\n\n        </div>\n    '});