Vue.component("app-pdf-druckvorlagen",{props:{identifier:{type:String,default:helpers.getAppID()},production:{type:Boolean,default:!0}},created(){},data:function(){return{pdf_einladung_pa:{name:"Patienten-Assessment",title:"Einladung",version:"1.1",description:"Drucken der Zugangsdaten sowie einer Kurzeinführung für das Optinomic Patienten-Assessment.",source:{text_1:"Sie finden auf unserer Fragebogen-Plattform einige Fragebögen, in denen Sie Aussagen zu verschiedenen Themen und Zeiträumen einschätzen sollen. Am Anfang jedes Fragebogens finden Sie eine kurze Anleitung. Lesen Sie diese bitte sorgfältig durch.Achten Sie dabei auf die hervorgehobenen Angaben zu den Zeiträumen, auf die sich die Fragen und Aussagen beziehen. Diese können von Fragebogen zu Fragebogen unterschiedlich sein.",text_2:"Alle Fragebögen enthalten Aussagen. Ihre Aufgabe ist zu bewerten, inwieweit diese Aussagen auf Sie bzw. Ihre Situation zutreffen. Antworten Sie möglichst spontan – es gibt keine richtigen oder falschen Antworten. Wichtig ist, dass die jeweilige Antwort für Sie persönlich stimmt.",text_3:"Wir bitten Sie, die aufgeführten Fragebögen in der bestehenden Reihenfolge lückenlos zu bearbeiten. Zum starten JEDES EINZELNEN Fragebogens klicken Sie am rechten Rand des angegebenen Fragebogens auf «START». Wenn Sie einen Fragebogen fertig bearbeitet und abgeschickt haben, schliessen sie den entsprechenden Tab und gelangen somit wieder auf die Startseite.",text_4:"Falls Sie Fragen nicht verstehen oder etwas unklar ist, wenden Sie sich an die anwesende Betreuungsperson."},loading_string:"",content:null},pdf_notizblatt:{name:"Notizblatt",title:"Gesprächsnotiz",version:"1.0",description:"Drucken eines leeren Verlaufsblattes.",loading_string:"",content:null},pdf_apps:{production:[{name:"actinfo_ein",title:"ActInfo",subtitle:"Information network on addiction care and therapy",identifier:"ch.suedhang.apps.actinfo_ein.production"},{name:"actinfo_aus",title:"ActInfo",subtitle:"Information network on addiction care and therapy",identifier:"ch.suedhang.apps.actinfo_aus.production"},{name:"tmt",title:"TMT",subtitle:"Trail Making Test",identifier:"ch.suedhang.apps.tmt.production"},{name:"bdi",title:"BDI-II",subtitle:"Beck Depressions-Inventar",identifier:"ch.suedhang.apps.bdi.production"},{name:"asrs",title:"",subtitle:"",identifier:"ch.suedhang.apps.asrs.production"},{name:"aase",title:"AASE-G",subtitle:"Alcohol Abstinence Self-Effcacy | Skala Versuchung",identifier:"ch.suedhang.apps.aase-g.production"},{name:"bscl",title:"BSCL",subtitle:"Brief Symptom Checklist",identifier:"ch.suedhang.apps.bscl_anq.production"},{name:"isk",title:"ISK-K",subtitle:"Inventar Sozialer Kompetenzen - Kurzform",identifier:"ch.suedhang.apps.isk.production"},{name:"whoqol",title:"WHOQOL-BREF",subtitle:"WHO Quality of Life - Kurzform",identifier:"ch.suedhang.apps.whoqol.production"},{name:"sci",title:"SCI",subtitle:"Stress-Coping-Inventar",identifier:"ch.suedhang.apps.sci.production"},{name:"rs13",title:"RS-13",subtitle:"Resilienzfragebogen",identifier:"ch.suedhang.apps.rs13.production"}]},pdf_contents:{}}},methods:{get_app_sr(name){try{if(this.production){var return_obj=null;return this.pdf_apps.production.forEach(function(app){app.name===name&&(return_obj=this.$store.state.data_apps.data_object[app.identifier])}.bind(this)),return_obj}}catch(err){return console.error("get_app_sr",err),null}},get_current_patient_module(name){try{if(this.production){var return_obj=null;return this.pdf_apps.production.forEach(function(app){app.name===name&&this.patient_modules.forEach(function(mod){mod.identifier===app.identifier&&(return_obj=Object.assign({},mod.module))}.bind(this))}.bind(this)),return_obj}}catch(err){return console.error("get_current_patient_module",err),null}},get_app_pdf_content(identifier){try{return this.pdf_contents[identifier]}catch(err){return console.error("get_app_pdf_content",err),[]}}},computed:{pdf_apps_array(){try{return this.production?this.pdf_apps.production:null}catch(err){return console.error("pdf_apps_array",err),null}},login_pid(){try{return this.patient_data.cis_pid}catch(err){return console.error("login_pid",err),"Error"}},login_pw(){try{return this.patient_data.birthdate.substring(0,10).replace("-","").replace("-","")}catch(err){return console.error("login_pw",err),"Error"}},pdf_apps_ready(){try{var return_ready=!1;if(this.production&&this.patient_modules)return this.pdf_apps.production.forEach(function(app){var sr_data=this.get_app_sr(app.name),app_data=this.get_current_patient_module(app.name);if(sr_data&&app_data){if("aase"===app.name)(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.aase_pdf_content(sr_data)),this.pdf_contents[app.name]=pdf.slice();if("actinfo_ein"===app.name){var pdf,sr_data_aus=this.get_app_sr("actinfo_aus");(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.actinfo_pdf_content(sr_data,sr_data_aus)),this.pdf_contents[app.name]=pdf.slice()}if("bdi"===app.name)(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.bdi_pdf_content(sr_data)),this.pdf_contents[app.name]=pdf.slice();if("bscl"===app.name)(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.bscl_pdf_content(sr_data)),this.pdf_contents[app.name]=pdf.slice();if("isk"===app.name)(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.iskk_pdf_content(sr_data)),this.pdf_contents[app.name]=pdf.slice();if("rs13"===app.name)(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.rs13_pdf_content(sr_data)),this.pdf_contents[app.name]=pdf.slice();if("sci"===app.name)(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.sci_pdf_content(sr_data)),this.pdf_contents[app.name]=pdf.slice();if("tmt"===app.name)(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.tmt_pdf_content(sr_data)),this.pdf_contents[app.name]=pdf.slice();if("whoqol"===app.name)(pdf=[]).push(this.pdf_app_info(app_data,!0)),pdf.push(this.whoqol_pdf_content(sr_data)),this.pdf_contents[app.name]=pdf.slice();return_ready=!0}}.bind(this)),return_ready}catch(err){return console.error("pdf_apps_ready",err),!1}},pdf_allgemein_ready(){try{if(this.patient_data){var credentials={table:{widths:[60,"*"],body:[[{text:"Login",color:"grey",margin:[0,6,0,6]},{text:this.login_pid,fontSize:16,margin:[0,6,0,6]}],[{text:"Passwort",color:"grey",margin:[0,6,0,6]},{text:this.login_pw,fontSize:16,margin:[0,6,0,6]}]]},layout:"noBorders"},_pdf_content=[];_pdf_content.push(makepdf._suedhang_logo_anschrift()),_pdf_content.push(makepdf._title(this.pdf_einladung_pa.name,this.patient_data.extras.full_name)),_pdf_content.push(makepdf._text(this.pdf_einladung_pa.source.text_1)),_pdf_content.push(makepdf._text(this.pdf_einladung_pa.source.text_2)),_pdf_content.push(makepdf._text(this.pdf_einladung_pa.source.text_3)),_pdf_content.push(makepdf._text(this.pdf_einladung_pa.source.text_4)),_pdf_content.push(makepdf._horizontalLine(62,"#F5F5F5")),_pdf_content.push(makepdf._heading("Persönliche Zugangsdaten",null,"h1")),_pdf_content.push(credentials),_pdf_content.push(makepdf._horizontalLine(62,"#F5F5F5")),this.pdf_einladung_pa.content=_pdf_content.slice();return(_pdf_content=[]).push({margin:[0,0,0,0],canvas:[{type:"line",x1:85,y1:0,x2:85,y2:720,lineWidth:.5,lineColor:"#BDBDBD"}]}),this.pdf_notizblatt.content=_pdf_content.slice(),!0}return!1}catch(e){return!1}}},created(){this.production&&this.pdf_apps.production.forEach(function(params){this.$store.dispatch("getSurveyResponses",params)}.bind(this))},template:'\n        <div>\n            \n            <optinomic-content-block v-if="pdf_allgemein_ready" title="Allgemeine" subtitle="Druckvorlagen (PDF)" id="pdf_allgemeine_druckvorlagen">\n                <optinomic-pdfmake :header-left="patient_data.extras.full_name"\n                    :footer-left="pdf_einladung_pa.title + \' :: \' + pdf_einladung_pa.name" header-right="Klinik Südhang"\n                    :document-title="pdf_einladung_pa.title + \' - \' + pdf_einladung_pa.name" :content="pdf_einladung_pa.content"\n                    hide-logo>\n                </optinomic-pdfmake>\n                <optinomic-pdfmake :header-left="patient_data.extras.full_name"\n                    :footer-left="pdf_notizblatt.title + \' :: \' + pdf_notizblatt.name" header-right="Klinik Südhang"\n                    :document-title="pdf_notizblatt.title" :content="pdf_notizblatt.content"\n                    hide-logo>\n                </optinomic-pdfmake>\n            </optinomic-content-block>\n\n            <optinomic-content-block title="Fragebogenauswertung" subtitle="Fallkonferenz (UNDER CONSTRUCTION)" id="pdf_gesamtauswertung">\n                <pdf-auswertung-gesamt></pdf-auswertung-gesamt>\n            </optinomic-content-block>\n            \n            <optinomic-content-block v-if="pdf_apps_ready" title="Spezifische Applikationen" subtitle="Druckvorlagen (PDF)" id="pdf_apps_druckvorlagen">\n                <div v-for="app in pdf_apps_array">\n                    <optinomic-pdfmake :header-left="app.title"\n                        :footer-left="app.subtitle" header-right="Klinik Südhang"\n                        :document-title="app.title" :content="get_app_pdf_content(app.name)"\n                        hide-logo>\n                    </optinomic-pdfmake>\n                </div>\n            </optinomic-content-block>\n\n        </div>\n    '});